<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <title>Docházka – Přehled</title>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.js"></script>
  <style>
    #calendar {
      max-width: 900px;
      margin: 40px auto;
    }
  </style>
</head>
<body>
  <h2>Docházka – Kalendář</h2>
  <div id="calendar"></div>

<!-- ... zbytek hlavičky zůstává stejný -->

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD4j1bO7JDbzUM-ca4AWUSkGYpmglWK_IQ",
    authDomain: "dochazka-app.firebaseapp.com",
    projectId: "dochazka-app",
    storageBucket: "dochazka-app.firebasestorage.app",
    messagingSenderId: "912220280247",
    appId: "1:912220280247:web:e0b27491b9234cba984432",
    measurementId: "G-G8PPKTK907"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);

  document.addEventListener("DOMContentLoaded", function () {
    const calendarEl = document.getElementById("calendar");

    const calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: "dayGridMonth",
      locale: "cs",
      dateClick: async function (info) {
        const typ = prompt("Vyber typ volna: napiš 'dovolená' nebo 'neplacené'");
        if (typ && (typ === "dovolená" || typ === "neplacené")) {
          const user = auth.currentUser;
          if (user) {
            await addDoc(collection(db, "zadosti"), {
              datum: info.dateStr,
              typ: typ,
              email: user.email,
              stav: "čeká na schválení"
            });
            alert("Žádost odeslána.");
          } else {
            alert("Uživatel není přihlášen.");
          }
        } else {
          alert("Zadej správně 'dovolená' nebo 'neplacené'.");
        }
      }
    });

    calendar.render();
  });
</script>
  
</body>
</html>
